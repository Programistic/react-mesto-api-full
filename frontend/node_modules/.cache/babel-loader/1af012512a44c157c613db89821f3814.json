{"ast":null,"code":"const cohortID = 'cohort-39';\nconst token = 'fed91f6d-1f71-4682-bc63-ccd602fc60c4';\nconst baseURL = 'https://mesto.nomoreparties.co/v1/';\nconst cardURL = `${baseURL}${cohortID}/cards`;\nconst userURL = `${baseURL}${cohortID}/users/me`;\nconst avatarURL = `${baseURL}${cohortID}/users/me/avatar`;\n\nclass Api {\n  constructor(userURL, cardURL, avatarURL, token) {\n    this._userURL = userURL;\n    this._cardURL = cardURL;\n    this._avatarURL = avatarURL;\n    this._token = token;\n    this._headers = {\n      authorization: this._token\n    };\n  }\n\n  getProfile() {\n    return fetch(this._userURL, {\n      headers: this._headers\n    }).then(res => this._getResponseData(res));\n  }\n\n  getCards() {\n    return fetch(this._cardURL, {\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._getResponseData(res));\n  }\n\n  setUserInfo(userData) {\n    return fetch(this._userURL, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: userData['user-name'],\n        about: userData['user-info']\n      })\n    }).then(res => this._getResponseData(res));\n  }\n\n  setAvatar(avatarData) {\n    return fetch(this._avatarURL, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatarData['avatar-image']\n      })\n    }).then(res => this._getResponseData(res));\n  }\n\n  setCard(cardData) {\n    return fetch(this._cardURL, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: cardData['place-name'],\n        link: cardData['place-image']\n      })\n    }).then(res => this._getResponseData(res));\n  }\n\n  deleteCard(cardID) {\n    return fetch(this._cardURL + `/${cardID}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => this._getResponseData(res));\n  }\n\n  addLike(cardID) {\n    return fetch(this._cardURL + `/${cardID}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => this._getResponseData(res));\n  }\n\n  deleteLike(cardID) {\n    return fetch(this._cardURL + `/${cardID}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => this._getResponseData(res));\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error ${res.status}`);\n  }\n\n}\n\nconst api = new Api(userURL, cardURL, avatarURL, token);\nexport default api;","map":{"version":3,"sources":["/home/maksim/dev/mesto-react/src/utils/Api.js"],"names":["cohortID","token","baseURL","cardURL","userURL","avatarURL","Api","constructor","_userURL","_cardURL","_avatarURL","_token","_headers","authorization","getProfile","fetch","headers","then","res","_getResponseData","getCards","setUserInfo","userData","method","body","JSON","stringify","name","about","setAvatar","avatarData","avatar","setCard","cardData","link","deleteCard","cardID","addLike","deleteLike","ok","json","Promise","reject","status","api"],"mappings":"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","sourcesContent":["const cohortID = 'cohort-39';\nconst token = 'fed91f6d-1f71-4682-bc63-ccd602fc60c4';\nconst baseURL = 'https://mesto.nomoreparties.co/v1/';\nconst cardURL = `${baseURL}${cohortID}/cards`;\nconst userURL = `${baseURL}${cohortID}/users/me`;\nconst avatarURL =`${baseURL}${cohortID}/users/me/avatar`;\n\nclass Api {\n  constructor(userURL, cardURL, avatarURL, token) {\n    this._userURL = userURL;\n    this._cardURL = cardURL;\n    this._avatarURL = avatarURL;\n    this._token = token;\n    this._headers = { authorization: this._token }\n  }\n\n  getProfile() {\n    return fetch(this._userURL, { headers: this._headers})\n      .then(res => this._getResponseData(res));\n  }\n\n  getCards() {\n    return fetch(this._cardURL, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(res => this._getResponseData(res))\n  }\n\n  setUserInfo(userData) {\n    return fetch(this._userURL, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: userData['user-name'],\n        about: userData['user-info']\n      })\n    })\n      .then(res => this._getResponseData(res))\n  }\n\n  setAvatar(avatarData) {\n    return fetch(this._avatarURL, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatarData['avatar-image']\n      })\n    })\n      .then(res => this._getResponseData(res))\n  }\n\n  setCard(cardData) {\n    return fetch(this._cardURL, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: cardData['place-name'],\n        link: cardData['place-image']\n      })\n    })\n      .then(res => this._getResponseData(res))\n  }\n\n  deleteCard(cardID) {\n    return fetch(this._cardURL + `/${cardID}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(res => this._getResponseData(res));\n  }\n\n  addLike(cardID) {\n    return fetch(this._cardURL + `/${cardID}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => this._getResponseData(res));\n  }\n\n  deleteLike(cardID) {\n    return fetch(this._cardURL + `/${cardID}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => this._getResponseData(res));\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(`Error ${res.status}`)\n  }\n}\n\nconst api = new Api(userURL, cardURL, avatarURL, token);\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}